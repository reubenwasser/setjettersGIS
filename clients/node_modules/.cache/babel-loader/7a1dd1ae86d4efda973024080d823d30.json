{"ast":null,"code":"var geojsonArea = require('geojson-area');\n\nmodule.exports = rewind;\n\nfunction rewind(gj, outer) {\n  switch (gj && gj.type || null) {\n    case 'FeatureCollection':\n      gj.features = gj.features.map(curryOuter(rewind, outer));\n      return gj;\n\n    case 'Feature':\n      gj.geometry = rewind(gj.geometry, outer);\n      return gj;\n\n    case 'Polygon':\n    case 'MultiPolygon':\n      return correct(gj, outer);\n\n    default:\n      return gj;\n  }\n}\n\nfunction curryOuter(a, b) {\n  return function (_) {\n    return a(_, b);\n  };\n}\n\nfunction correct(_, outer) {\n  if (_.type === 'Polygon') {\n    _.coordinates = correctRings(_.coordinates, outer);\n  } else if (_.type === 'MultiPolygon') {\n    _.coordinates = _.coordinates.map(curryOuter(correctRings, outer));\n  }\n\n  return _;\n}\n\nfunction correctRings(_, outer) {\n  outer = !!outer;\n  _[0] = wind(_[0], !outer);\n\n  for (var i = 1; i < _.length; i++) {\n    _[i] = wind(_[i], outer);\n  }\n\n  return _;\n}\n\nfunction wind(_, dir) {\n  return cw(_) === dir ? _ : _.reverse();\n}\n\nfunction cw(_) {\n  return geojsonArea.ring(_) >= 0;\n}","map":{"version":3,"sources":["/home/rwasser/setjetters/setjettersGIS/clients/node_modules/geojson-rewind/index.js"],"names":["geojsonArea","require","module","exports","rewind","gj","outer","type","features","map","curryOuter","geometry","correct","a","b","_","coordinates","correctRings","wind","i","length","dir","cw","reverse","ring"],"mappings":"AAAA,IAAIA,WAAW,GAAGC,OAAO,CAAC,cAAD,CAAzB;;AAEAC,MAAM,CAACC,OAAP,GAAiBC,MAAjB;;AAEA,SAASA,MAAT,CAAgBC,EAAhB,EAAoBC,KAApB,EAA2B;AACvB,UAASD,EAAE,IAAIA,EAAE,CAACE,IAAV,IAAmB,IAA3B;AACI,SAAK,mBAAL;AACIF,MAAAA,EAAE,CAACG,QAAH,GAAcH,EAAE,CAACG,QAAH,CAAYC,GAAZ,CAAgBC,UAAU,CAACN,MAAD,EAASE,KAAT,CAA1B,CAAd;AACA,aAAOD,EAAP;;AACJ,SAAK,SAAL;AACIA,MAAAA,EAAE,CAACM,QAAH,GAAcP,MAAM,CAACC,EAAE,CAACM,QAAJ,EAAcL,KAAd,CAApB;AACA,aAAOD,EAAP;;AACJ,SAAK,SAAL;AACA,SAAK,cAAL;AACI,aAAOO,OAAO,CAACP,EAAD,EAAKC,KAAL,CAAd;;AACJ;AACI,aAAOD,EAAP;AAXR;AAaH;;AAED,SAASK,UAAT,CAAoBG,CAApB,EAAuBC,CAAvB,EAA0B;AACtB,SAAO,UAASC,CAAT,EAAY;AAAE,WAAOF,CAAC,CAACE,CAAD,EAAID,CAAJ,CAAR;AAAiB,GAAtC;AACH;;AAED,SAASF,OAAT,CAAiBG,CAAjB,EAAoBT,KAApB,EAA2B;AACvB,MAAIS,CAAC,CAACR,IAAF,KAAW,SAAf,EAA0B;AACtBQ,IAAAA,CAAC,CAACC,WAAF,GAAgBC,YAAY,CAACF,CAAC,CAACC,WAAH,EAAgBV,KAAhB,CAA5B;AACH,GAFD,MAEO,IAAIS,CAAC,CAACR,IAAF,KAAW,cAAf,EAA+B;AAClCQ,IAAAA,CAAC,CAACC,WAAF,GAAgBD,CAAC,CAACC,WAAF,CAAcP,GAAd,CAAkBC,UAAU,CAACO,YAAD,EAAeX,KAAf,CAA5B,CAAhB;AACH;;AACD,SAAOS,CAAP;AACH;;AAED,SAASE,YAAT,CAAsBF,CAAtB,EAAyBT,KAAzB,EAAgC;AAC5BA,EAAAA,KAAK,GAAG,CAAC,CAACA,KAAV;AACAS,EAAAA,CAAC,CAAC,CAAD,CAAD,GAAOG,IAAI,CAACH,CAAC,CAAC,CAAD,CAAF,EAAO,CAACT,KAAR,CAAX;;AACA,OAAK,IAAIa,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,CAAC,CAACK,MAAtB,EAA8BD,CAAC,EAA/B,EAAmC;AAC/BJ,IAAAA,CAAC,CAACI,CAAD,CAAD,GAAOD,IAAI,CAACH,CAAC,CAACI,CAAD,CAAF,EAAOb,KAAP,CAAX;AACH;;AACD,SAAOS,CAAP;AACH;;AAED,SAASG,IAAT,CAAcH,CAAd,EAAiBM,GAAjB,EAAsB;AAClB,SAAOC,EAAE,CAACP,CAAD,CAAF,KAAUM,GAAV,GAAgBN,CAAhB,GAAoBA,CAAC,CAACQ,OAAF,EAA3B;AACH;;AAED,SAASD,EAAT,CAAYP,CAAZ,EAAe;AACX,SAAOf,WAAW,CAACwB,IAAZ,CAAiBT,CAAjB,KAAuB,CAA9B;AACH","sourcesContent":["var geojsonArea = require('geojson-area');\n\nmodule.exports = rewind;\n\nfunction rewind(gj, outer) {\n    switch ((gj && gj.type) || null) {\n        case 'FeatureCollection':\n            gj.features = gj.features.map(curryOuter(rewind, outer));\n            return gj;\n        case 'Feature':\n            gj.geometry = rewind(gj.geometry, outer);\n            return gj;\n        case 'Polygon':\n        case 'MultiPolygon':\n            return correct(gj, outer);\n        default:\n            return gj;\n    }\n}\n\nfunction curryOuter(a, b) {\n    return function(_) { return a(_, b); };\n}\n\nfunction correct(_, outer) {\n    if (_.type === 'Polygon') {\n        _.coordinates = correctRings(_.coordinates, outer);\n    } else if (_.type === 'MultiPolygon') {\n        _.coordinates = _.coordinates.map(curryOuter(correctRings, outer));\n    }\n    return _;\n}\n\nfunction correctRings(_, outer) {\n    outer = !!outer;\n    _[0] = wind(_[0], !outer);\n    for (var i = 1; i < _.length; i++) {\n        _[i] = wind(_[i], outer);\n    }\n    return _;\n}\n\nfunction wind(_, dir) {\n    return cw(_) === dir ? _ : _.reverse();\n}\n\nfunction cw(_) {\n    return geojsonArea.ring(_) >= 0;\n}\n"]},"metadata":{},"sourceType":"script"}